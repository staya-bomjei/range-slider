(()=>{"use strict";var t,s={830:(t,s,e)=>{e(957);$((()=>{$(".js-control-panel").each(((t,s)=>{const e=$(s);new class{constructor(t){this.$component=t,this.$slider=$(".js-control-panel__slider",t),this.$min=$(".js-control-panel__min input",t),this.$max=$(".js-control-panel__max input",t),this.$step=$(".js-control-panel__step input",t),this.$from=$(".js-control-panel__from input",t),this.$to=$(".js-control-panel__to input",t),this.$parts=$(".js-control-panel__parts input",t),this.$vertical=$(".js-control-panel__vertical input",t),this.$range=$(".js-control-panel__range input",t),this.$scale=$(".js-control-panel__scale input",t),this.$bar=$(".js-control-panel__bar input",t),this.$tip=$(".js-control-panel__tip input",t)}init(){const t=JSON.parse(this.$component.attr("data-slider-options"));this.$slider.rangeSlider(t),this.updateInputs(),this.attachEventHandlers()}attachEventHandlers(){this.$slider.rangeSlider("onchange",(()=>this.updateInputs())),this.$min.on("change",(()=>this.handleMinChange())),this.$max.on("change",(()=>this.handleMaxChange())),this.$step.on("change",(()=>this.handleStepChange())),this.$from.on("change",(()=>this.handleFromChange())),this.$to.on("change",(()=>this.handleToChange())),this.$parts.on("change",(()=>this.handlePartsChange())),this.$vertical.on("change",(()=>this.handleVerticalChange())),this.$range.on("change",(()=>this.handleRangeChange())),this.$scale.on("change",(()=>this.handleScaleChange())),this.$bar.on("change",(()=>this.handleBarChange())),this.$tip.on("change",(()=>this.handleTipChange()))}handleMinChange(){const t=Number(this.$min.val());this.setValidOptions({min:t})}handleMaxChange(){const t=Number(this.$max.val());this.setValidOptions({max:t})}handleStepChange(){const t=Number(this.$step.val());this.setValidOptions({step:t})}handleFromChange(){const t=Number(this.$from.val());this.setValidOptions({valueFrom:t})}handleToChange(){const t=Number(this.$to.val());this.setValidOptions({valueTo:t})}handlePartsChange(){const t=Number(this.$parts.val());this.setValidOptions({scaleParts:t})}handleVerticalChange(){let{orientation:t}=this.getOptions();t="horizontal"===t?"vertical":"horizontal",this.setOptions({orientation:t})}handleRangeChange(){const{isRange:t}=this.getOptions();this.setValidOptions({isRange:!t})}handleScaleChange(){const{showScale:t}=this.getOptions();this.setOptions({showScale:!t})}handleBarChange(){const{showProgress:t}=this.getOptions();this.setOptions({showProgress:!t})}handleTipChange(){const{showTooltip:t}=this.getOptions();this.setOptions({showTooltip:!t})}getOptions(){return this.$slider.rangeSlider("get")}setOptions(t){this.$slider.rangeSlider("set",t)}setValidOptions(t,s=0){const e=" ".repeat(s);if(s>10)throw new Error("Stack Overflow");try{console.warn(`${e}try to set options`,t),this.setOptions(t)}catch(a){const{value:i}=a;if(void 0===i)throw a;const n="isRange"===i,r="scaleParts"===i,o="valueFrom"===i,h="valueTo"===i,l=this.getOptions(),c=void 0!==t.min?t.min:l.min,p=void 0!==t.max?t.max:l.max;console.warn(`${e}start validation`),console.warn(`${e}original options: `,l),console.warn(`${e}trying to set options: `,t),console.error(`${e}error message: ${a.message}`),(n||h)&&this.setValidOptions({...t,valueTo:p},s+1),r&&this.setValidOptions({...t,scaleParts:1},s+1),o&&this.setValidOptions({...t,valueFrom:c},s+1),this.updateInputs(),console.warn(`${e}end validation`)}}updateInputs(){const{min:t,max:s,step:e,valueFrom:a,valueTo:i,isRange:n,orientation:r,showScale:o,scaleParts:h,showTooltip:l,showProgress:c}=this.$slider.rangeSlider("get");this.$min.val(t),this.$max.val(s),this.$step.val(e),this.$from.val(a),this.$from.attr("min",t),this.$from.attr("max",s),this.$from.attr("step",e),this.$parts.val(h),n?(this.$to.attr("disabled",!1),this.$to.val(i),this.$to.attr("min",t),this.$to.attr("max",s),this.$to.attr("step",e)):(this.$to.attr("disabled",!0),this.$to.val("")),this.$range.attr("checked",n),this.$vertical.attr("checked","vertical"===r),this.$scale.attr("checked",o),this.$tip.attr("checked",l),this.$bar.attr("checked",c)}}(e).init()}))}));class a{constructor(t){this.$component=t,this.$slider=$(".js-tapper-view__slider",t),this.$key=$(".js-tapper-view__key",t),this.$canvas=$(".js-tapper-view__canvas",t)}init(){const t=JSON.parse(this.$component.attr("data-tappers")),s=t.map((t=>t.name));this.keys=t.map((t=>t.key)),this.keysBits=this.keys.map((t=>a.keyToBinaryArray(BigInt(t)))),this.$slider.rangeSlider({strings:s,showTooltip:!1}),this.$canvas.attr("width",634),this.$canvas.attr("height",100),this.ctx=this.$canvas[0].getContext("2d"),this.update(),this.attachEventHandlers()}attachEventHandlers(){this.$slider.rangeSlider("onchange",(()=>this.update()))}update(){this.updateKey(),this.updateCanvas()}updateKey(){const{valueFrom:t}=this.$slider.rangeSlider("get");this.$key.html(this.keys[t])}updateCanvas(){const{valueFrom:t}=this.$slider.rangeSlider("get"),s=this.keysBits[t];this.clearCanvas(),s.forEach(((t,s)=>{t&&this.drawCell(s)}))}drawCell(t){const s=106-Math.trunc(t/17)-1,e=t%17,a=4*s+2*s,i=4*e+2*e;this.ctx.fillStyle="black",this.ctx.fillRect(a,i,4,4)}clearCanvas(){const t=Number(this.$canvas.attr("width")),s=Number(this.$canvas.attr("height"));this.ctx.fillStyle="white",this.ctx.fillRect(0,0,t,s)}static keyToBinaryArray(t){let s=t/BigInt(17);const e=[];for(;s>0n;)e.push(s%2n),s/=2n;return e}}const i=a;$((()=>{$(".js-tapper-view").each(((t,s)=>{const e=$(s);new i(e).init()}))}))}},e={};function a(t){var i=e[t];if(void 0!==i)return i.exports;var n=e[t]={exports:{}};return s[t].call(n.exports,n,n.exports,a),n.exports}a.m=s,t=[],a.O=(s,e,i,n)=>{if(!e){var r=1/0;for(c=0;c<t.length;c++){for(var[e,i,n]=t[c],o=!0,h=0;h<e.length;h++)(!1&n||r>=n)&&Object.keys(a.O).every((t=>a.O[t](e[h])))?e.splice(h--,1):(o=!1,n<r&&(r=n));if(o){t.splice(c--,1);var l=i();void 0!==l&&(s=l)}}return s}n=n||0;for(var c=t.length;c>0&&t[c-1][2]>n;c--)t[c]=t[c-1];t[c]=[e,i,n]},a.n=t=>{var s=t&&t.__esModule?()=>t.default:()=>t;return a.d(s,{a:s}),s},a.d=(t,s)=>{for(var e in s)a.o(s,e)&&!a.o(t,e)&&Object.defineProperty(t,e,{enumerable:!0,get:s[e]})},a.o=(t,s)=>Object.prototype.hasOwnProperty.call(t,s),(()=>{var t={88:0,903:0};a.O.j=s=>0===t[s];var s=(s,e)=>{var i,n,[r,o,h]=e,l=0;if(r.some((s=>0!==t[s]))){for(i in o)a.o(o,i)&&(a.m[i]=o[i]);if(h)var c=h(a)}for(s&&s(e);l<r.length;l++)n=r[l],a.o(t,n)&&t[n]&&t[n][0](),t[r[l]]=0;return a.O(c)},e=self.webpackChunkrange_slider=self.webpackChunkrange_slider||[];e.forEach(s.bind(null,0)),e.push=s.bind(null,e.push.bind(e))})();var i=a.O(void 0,[957],(()=>a(830)));i=a.O(i)})();